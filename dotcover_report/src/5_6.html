<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tudor Popescu\Desktop\I.NET\Project\VetExpert\VetExpert\VetExpert.API\Controllers\ClinicsController.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoMapper;
using FluentValidation;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using System;
using VetExpert.API.Dto;
using VetExpert.Domain;
using VetExpert.Infrastructure;

namespace VetExpert.API.Controllers
{
    [Route(&quot;api/[controller]&quot;)]
    [ApiController]
    public class ClinicsController : ControllerBase
    {
        private readonly IRepository&lt;Clinic&gt; _clinicRepository;
        private readonly IMapper _mapper;

		public ClinicsController(IRepository&lt;Clinic&gt; clinicRepository,
            IMapper mapper)
        {
            _clinicRepository = clinicRepository;
            _mapper = mapper;
        }

        [HttpGet]
        public async Task&lt;IActionResult&gt; Get()
        {
            var clinics = await _clinicRepository.GetAll();

            return Ok(clinics);
        }

        [HttpGet(&quot;{clinicId:guid}&quot;)]
        public async Task&lt;IActionResult&gt; Get(Guid clinicId)
        {
            var clinic = await _clinicRepository.Get(clinicId);

            if (clinic == null)
            {
                return NotFound();
            }

            return Ok(clinic);
        }

        [HttpPost]
        public async Task&lt;IActionResult&gt; Create([FromBody] CreateClinicDto clinicDto)
        {
            var clinic = _mapper.Map&lt;Clinic&gt;(clinicDto);

			await _clinicRepository.Add(clinic);
			await _clinicRepository.SaveChangesAsync();

            return Created(nameof(Get), clinic);
        }

        [HttpDelete(&quot;{clinicId:guid}&quot;)]
        public async Task&lt;IActionResult&gt; Delete(Guid clinicId)
        {
            var clinic = await _clinicRepository.Get(clinicId);

            if (clinic == null)
            {
                return NotFound();
            }

            _clinicRepository.Delete(clinic);
            await _clinicRepository.SaveChangesAsync();

            return Ok();
        }

        [HttpPut(&quot;{clinicId:guid}&quot;)]
        public async Task&lt;IActionResult&gt; Update(Guid clinicId,
            [FromBody] CreateClinicDto clinicDto)
        {
            var clinic = await _clinicRepository.Get(clinicId);

            if (clinic == null)
            {
                return NotFound();
            }

            clinic.Name = clinicDto.Name;
            clinic.Address = clinicDto.Address;
            clinic.Email = clinicDto.Email;
            clinic.WebsiteUrl = clinicDto.WebsiteUrl;

            _clinicRepository.Update(clinic);
            await _clinicRepository.SaveChangesAsync();

            return Ok(clinic);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[19,3,20,28,1],[21,9,21,10,1],[22,13,22,50,1],[23,13,23,30,1],[24,9,24,10,1],[28,9,28,10,1],[29,13,29,60,1],[31,13,31,32,1],[32,9,32,10,1],[36,9,36,10,0],[37,13,37,64,0],[39,13,39,32,0],[40,13,40,14,0],[41,17,41,35,0],[44,13,44,31,0],[45,9,45,10,0],[49,9,49,10,0],[50,13,50,57,0],[52,4,52,40,0],[53,4,53,47,0],[55,13,55,49,0],[56,9,56,10,0],[60,9,60,10,0],[61,13,61,64,0],[63,13,63,32,0],[64,13,64,14,0],[65,17,65,35,0],[68,13,68,46,0],[69,13,69,56,0],[71,13,71,25,0],[72,9,72,10,0],[77,9,77,10,0],[78,13,78,64,0],[80,13,80,32,0],[81,13,81,14,0],[82,17,82,35,0],[85,13,85,42,0],[86,13,86,48,0],[87,13,87,44,0],[88,13,88,54,0],[90,13,90,46,0],[91,13,91,56,0],[93,13,93,31,0],[94,9,94,10,0]]);
    </script>
  </body>
</html>
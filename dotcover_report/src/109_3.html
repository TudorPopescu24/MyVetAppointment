<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tudor Popescu\Desktop\I.NET\Project\VetExpert\VetExpert\VetExpert.Testing\Program.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Microsoft.AspNetCore.Builder;
using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using System.Text.Json.Serialization;
using VetExpert.Infrastructure;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.

builder.Services.AddControllers();
// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();

builder.Services.AddControllers().AddJsonOptions(x =&gt;
   x.JsonSerializerOptions.ReferenceHandler = ReferenceHandler.Preserve);

builder.Services.AddDbContext&lt;MainDbContext&gt;(options =&gt; options.UseSqlite(builder.Configuration.GetConnectionString(&quot;MyVetAppointmentDb&quot;), b=&gt;b.MigrationsAssembly(typeof(MainDbContext).Assembly.FullName)));
builder.Services.AddScoped(typeof(IRepository&lt;&gt;), typeof(Repository&lt;&gt;));

builder.Services.AddCors(options =&gt;
{
	options.AddPolicy(&quot;vetExpertCors&quot;, policy =&gt;
	{
		policy.AllowAnyOrigin().AllowAnyHeader().AllowAnyMethod();
	});
});

var app = builder.Build();

app.UseHttpsRedirection();
app.UseCors(&quot;vetExpertCors&quot;);

app.UseAuthorization();

app.MapControllers();

app.Run();

    </pre>
    <script type="text/javascript">
      highlightRanges([[8,1,8,50,0],[12,1,12,35,0],[14,1,14,44,0],[16,1,17,4,0],[17,4,17,72,0],[17,72,17,74,0],[19,1,19,57,0],[19,57,19,143,0],[19,143,19,204,0],[19,204,19,205,0],[19,205,19,207,0],[20,1,20,73,0],[22,1,23,1,0],[23,1,23,2,0],[23,2,24,2,0],[24,2,25,2,0],[25,2,25,3,0],[25,3,26,3,0],[26,3,26,61,0],[26,61,27,2,0],[27,2,27,3,0],[27,3,27,5,0],[27,5,28,1,0],[28,1,28,2,0],[28,2,28,4,0],[30,1,30,27,0],[32,1,32,27,0],[33,1,33,30,0],[35,1,35,24,0],[37,1,37,22,0],[39,1,39,11,0]]);
    </script>
  </body>
</html>
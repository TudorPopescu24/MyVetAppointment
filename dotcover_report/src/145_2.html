<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Tudor Popescu\Desktop\I.NET\Project\VetExpert\VetExpert\VetExpert.Application\Handlers\Bills\DeleteBillCommandHandler.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoMapper;
using MediatR;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using VetExpert.Application.Commands.Bills;
using VetExpert.Application.Response.Bills;
using VetExpert.Domain;
using VetExpert.Infrastructure;

namespace VetExpert.Application.Handlers.Bills
{
	public class DeleteBillCommandHandler : IRequestHandler&lt;DeleteBillCommand&gt;
	{
		private readonly IRepository&lt;Bill&gt; _repository;

		public DeleteBillCommandHandler(IRepository&lt;Bill&gt; repository)
		{
			_repository = repository;
		}

		public async Task&lt;Unit&gt; Handle(DeleteBillCommand request, CancellationToken cancellationToken)
		{
			var bill = await _repository.Get(request.BillId);

			if (bill == null)
			{
				throw new Exception($&quot;Could not find bill with id {request.BillId}&quot;);
			}

			_repository.Delete(bill);
			await _repository.SaveChangesAsync();

			return Unit.Value;
		}
	}
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[19,3,19,64,0],[20,3,20,4,0],[21,4,21,29,0],[22,3,22,4,0],[25,3,25,4,0],[26,4,26,53,0],[28,4,28,21,0],[29,4,29,5,0],[30,5,30,74,0],[33,4,33,29,0],[34,4,34,41,0],[36,4,36,22,0],[37,3,37,4,0]]);
    </script>
  </body>
</html>